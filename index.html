<h2>Mensagem copiada!</h2>
<div id="mensagem">Carregando...</div>
<button id="btnCopiar" style="margin-top: 20px; padding: 10px 20px; font-size: 1em;">
  Copiar mensagem novamente
</button>

<script>
  window.onload = function () {
    const urlParams = new URLSearchParams(window.location.search);
    const msg = urlParams.get("msg");
    const display = document.getElementById("mensagem");
    const btnCopiar = document.getElementById("btnCopiar");

    if (msg) {
      const decodedMsg = decodeURIComponent(msg);
      display.textContent = decodedMsg;

      // Copiar automaticamente ao abrir
      navigator.clipboard.writeText(decodedMsg).then(() => {
        console.log("Mensagem copiada para a área de transferência");
      }).catch(() => {
        console.log("Falha ao copiar para a área de transferência");
      });

      // Botão para copiar manualmente quando quiser
      btnCopiar.onclick = () => {
        navigator.clipboard.writeText(decodedMsg).then(() => {
          alert("Mensagem copiada!");
        }).catch(() => {
          alert("Falha ao copiar mensagem.");
        });
      };

      // Se não quiser fechar a aba automaticamente, comente a linha abaixo:
      // setTimeout(() => window.close(), 2000);

    } else {
      display.textContent = "Nenhuma mensagem recebida.";
      btnCopiar.style.display = "none"; // Esconde o botão se não tem mensagem
    }
  };
</script>
